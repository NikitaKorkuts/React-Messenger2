"use strict";(self.webpackChunkmessanger=self.webpackChunkmessanger||[]).push([[316],{8313:function(e,t,a){a.d(t,{r:function(){return c}});var s,n=a(2791),r=["title","titleId"];function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function l(e,t){var a=e.title,l=e.titleId,c=o(e,r);return n.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":l},c),a?n.createElement("title",{id:l},a):null,s||(s=n.createElement("path",{d:"M0 12.116l2.053-1.897c2.401 1.162 3.924 2.045 6.622 3.969 5.073-5.757 8.426-8.678 14.657-12.555l.668 1.536c-5.139 4.484-8.902 9.479-14.321 19.198-3.343-3.936-5.574-6.446-9.679-10.251z"})))}var c=n.forwardRef(l);a.p},3300:function(e,t,a){a.d(t,{D:function(){return u}});var s=a(1413),n=a(3366);a(2791);var r=a(6871),i=a(8687),o=a(184),l=["isAuth"],c=function(e){return{isAuth:e.auth.isAuth}},u=function(e){return(0,i.$j)(c)((function(t){t.isAuth;var a=function(e,t){if(null==e)return{};var a,s,r=(0,n.Z)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(t,l);return t.isAuth?(0,o.jsx)(e,(0,s.Z)({},a)):(0,o.jsx)(r.Fg,{to:"/login"})}))}},316:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var s=a(2791),n=a(5671),r=a(3144),i=a(136),o=a(7277),l=a(8687),c=a(7781),u=a(3636),g=a(3300),d={dialogs:"dialogs_dialogs__MkfWI",noDialogs:"dialogs_noDialogs__BINIL",dialog:"dialogs_dialog__87380",dialogMain:"dialogs_dialogMain__6K+yH",avatar:"dialogs_avatar__0yRSR",userInfo:"dialogs_userInfo__1j8Qp",userName:"dialogs_userName__KyzWK",lastMessage:"dialogs_lastMessage__5Cvht",lastMessageBody:"dialogs_lastMessageBody__cF8B8",lastMessageSender:"dialogs_lastMessageSender__fmoJ6",isLastMessageViewed:"dialogs_isLastMessageViewed__fdPJY",viewed:"dialogs_viewed__PY2x0",newMessagesCount:"dialogs_newMessagesCount__Y-lAK",lastDialogActivityDate:"dialogs_lastDialogActivityDate__Glr1H"},f=a(3504),h=a(5236),v=a(4739),m=a(7696),p=function(e){var t=new Date,a=t.getDate()===e.getDate(),s=t.getMonth()===e.getMonth(),n=t.getFullYear()===e.getFullYear(),r=(0,v.L)(e),i=(0,m.F)(e);return a&&s&&n?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432 ".concat(r):t.getDate()===e.getDate()-1&&s&&n?"\u0412\u0447\u0435\u0440\u0430 \u0432 ".concat(r):n?"".concat(i," ").concat(r):"".concat(i," \u0433.")},_=a(8313),M=a(184),w=function(e){var t,a,s=e.dialog,n=e.authUserId,r=(null===(t=s.lastMessage)||void 0===t?void 0:t.senderId)===n;return(0,M.jsxs)(f.rU,{to:"/dialog/"+s.id,className:d.dialog,children:[(0,M.jsxs)("div",{className:d.dialogMain,children:[function(){var e=s.photos.small;return(0,M.jsx)("img",{className:d.avatar,src:e||h,alt:"avatar"})}(),(0,M.jsxs)("div",{className:d.userInfo,children:[(0,M.jsx)("p",{className:d.userName,children:s.userName}),(0,M.jsx)("div",{className:d.lastMessage,children:(0,M.jsx)("p",{className:d.lastMessageBody,children:function(){var e=s.lastMessage;return s.hasNewMessages?"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435":e?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(_.r,{className:"".concat(d.isLastMessageViewed," ").concat(e.viewed?d.viewed:"")}),e.senderName&&(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("span",{className:d.lastMessageSender,children:"".concat(r?"\u0412\u044b":e.senderName,": ")})}),s.lastMessage.body]}):"\u041d\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"}()})})]}),s.hasNewMessages&&(0,M.jsx)("div",{className:d.newMessagesCount,children:s.newMessagesCount}),!(null!==(a=s.lastMessage)&&void 0!==a&&a.viewed)&&!s.hasNewMessages&&(0,M.jsx)("div",{className:d.notViewedMessage})]}),(0,M.jsx)("div",{className:d.lastDialogActivityDate,children:(0,M.jsx)("p",{children:p(s.lastDialogActivityDate)})})]})},j=function(e){var t=e.dialogs,a=e.authUserId;return(0,M.jsxs)("div",{className:d.dialogs,children:[t.map((function(e){return(0,M.jsx)(w,{dialog:e,authUserId:a},e.id)})),0===t.length&&(0,M.jsx)("span",{className:d.noDialogs,children:"\u041d\u0435\u0442 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432"})]})},y=function(e){(0,i.Z)(a,e);var t=(0,o.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,r.Z)(a,[{key:"componentDidMount",value:function(){(0,this.props.getDialogs)()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.getDialogs,s=t.newMessagesCount;e.newMessagesCount!==s&&a()}},{key:"render",value:function(){var e=this.props,t=e.dialogs,a=e.authUserId;return(0,M.jsx)(j,{dialogs:t,authUserId:a})}}]),a}(s.Component),x=(0,c.qC)(g.D,(0,l.$j)((function(e){return{dialogs:e.dialogs.dialogs,authUserId:e.auth.userId,newMessagesCount:e.dialogs.newMessagesCount}}),{getDialogs:u.AB,getNewMessagesCount:u.CX}))(y),D=function(){return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(x,{})})}},4739:function(e,t,a){a.d(t,{L:function(){return s}});var s=function(e){return"".concat(e.getHours(),":").concat((e.getMinutes()<10?"0":"")+e.getMinutes())}},7696:function(e,t,a){a.d(t,{F:function(){return s}});var s=function(e){var t=(new Date).getFullYear(),a=e.toLocaleString("default",{month:"short"}),s="".concat(e.getDate()," ").concat(a),n="".concat(e.getDate()," ").concat(a," ").concat(e.getFullYear());return t===e.getFullYear()?s:n}}}]);
//# sourceMappingURL=316.9db864ab.chunk.js.map